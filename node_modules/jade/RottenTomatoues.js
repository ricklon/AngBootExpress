var request = require('request');
var key = "t7hguhwcm7d7nx5zpwjk4re9";

/*
request('http://api.rottentomatoes.com/api/public/v1.0.json?apikey='+key, function (error, response, body) {
  if (!error && response.statusCode == 200) {
    console.log(body);
  }
});


request('http://api.rottentomatoes.com/api/public/v1.0/movies.json?apikey='+key, function (error, response, body) {
  if (!error && response.statusCode == 200) {
    console.log(body);
  }
});
*/

request('http://api.rottentomatoes.com/api/public/v1.0/movies/769959054/similar.json?apikey='+key+'&q=night', function (error, response, body) {
  if (!error && response.statusCode == 200) {
    body = JSON.parse(body);
    //console.log(body.movies[0]);
   // console.log(body.movies[0].abridged_cast);
    var actor = 'Christian Bale';
    for (ii = 0; ii <body.movies[0].abridged_cast.length; ii++ ){
        //console.log(body.movies[0].abridged_cast[ii].name);
        if (body.movies[0].abridged_cast[ii].name === actor) {
            console.log("Found: " + actor);
            break;
        }
    }
    
  }
});
